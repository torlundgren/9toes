#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

.page {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  padding: 16px;
  box-sizing: border-box;
}

.top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: min(92vw, calc(100vh - 140px), 720px);
  margin-bottom: 16px;
}

.topLeft {
  display: flex;
  align-items: baseline;
  gap: 16px;
}

.title {
  font-size: 1.5rem;
  font-weight: 700;
}

.status {
  font-size: 0.95rem;
  opacity: 0.7;
}

.topRight {
  display: flex;
  gap: 8px;
}

.btn {
  padding: 8px 16px;
  border-radius: 8px;
  font-size: 0.9rem;
}

.btnToggle {
  opacity: 0.5;
  transition: opacity 150ms ease, background 150ms ease;
}

.btnToggle.btnActive {
  opacity: 1;
  background: rgba(59, 130, 246, 0.3);
  border-color: #3b82f6;
}

.statsBar {
  display: flex;
  gap: 16px;
  font-size: 0.85rem;
  opacity: 0.6;
  margin-bottom: 12px;
}

.matchBar {
  opacity: 1;
  font-size: 1rem;
  font-weight: 500;
}

.matchTitle {
  font-weight: 700;
  color: var(--accent);
}

.statItem {
  display: flex;
  gap: 4px;
}

.statHuman {
  color: #22c55e;
}

.statAI {
  color: #f59e0b;
}

/* Start Panel */
.startPanel {
  width: min(92vw, calc(100vh - 140px), 720px);
  display: flex;
  justify-content: center;
  margin: 24px 0 12px;
}

.startCard {
  width: min(92vw, 400px);
  background: var(--bg-panel);
  border-radius: 20px;
  padding: 32px;
  border: 1px solid var(--border-strong);
  box-shadow: 0 20px 60px var(--shadow);
}

.startHeader {
  font-size: 1.5rem;
  font-weight: 800;
  text-align: center;
  margin-bottom: 28px;
  letter-spacing: -0.02em;
}

.startSection {
  margin-bottom: 24px;
}

.startSectionTitle {
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-dim);
  margin-bottom: 12px;
}

.startOptions {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.startOptions4 {
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
}

.startOptions4 .optionCard {
  padding: 12px 4px;
}

.startOptions4 .optionLabel {
  font-size: 0.7rem;
}

.optionCard {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 16px 8px;
  border-radius: 14px;
  border: 2px solid var(--border);
  background: var(--bg-panel);
  cursor: pointer;
  transition: all 150ms ease;
}

.optionCard:hover {
  border-color: var(--border-strong);
  background: var(--bg-button-hover);
}

.optionCard.selected {
  border-color: var(--accent);
  background: rgba(100, 108, 255, 0.15);
  box-shadow: 0 0 0 3px rgba(100, 108, 255, 0.2);
}

.optionIcon {
  font-size: 1.8rem;
  font-weight: 900;
  line-height: 1;
  color: var(--text-dim);
}

.optionCard.selected .optionIcon {
  color: var(--text);
}

.optionX {
  color: var(--x-color) !important;
}

.optionO {
  color: var(--o-color) !important;
}

.optionEmoji {
  font-size: 1.6rem;
  line-height: 1;
}

.optionLabel {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-dim);
}

.optionCard.selected .optionLabel {
  color: var(--text);
}

.optionToggle {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 14px 16px;
  border-radius: 12px;
  border: 2px solid var(--border);
  background: var(--bg-panel);
  cursor: pointer;
  transition: all 150ms ease;
  text-align: left;
}

.optionToggle:hover {
  border-color: var(--border-strong);
  background: var(--bg-button-hover);
}

.optionToggle.selected {
  border-color: var(--accent);
  background: rgba(100, 108, 255, 0.1);
}

.optionToggleIcon {
  font-size: 1.4rem;
}

.optionToggleText {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.optionToggleLabel {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text);
}

.optionToggleDesc {
  font-size: 0.75rem;
  color: var(--text-dim);
}

.optionToggleCheck {
  width: 24px;
  height: 24px;
  border-radius: 6px;
  border: 2px solid var(--border-strong);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.85rem;
  font-weight: 700;
  color: transparent;
  transition: all 150ms ease;
}

.optionToggleCheck.checked {
  background: var(--accent);
  border-color: var(--accent);
  color: white;
}

/* Advanced Options */
.advancedSection {
  width: 100%;
  margin-top: 8px;
}

.advancedToggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 12px 16px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: transparent;
  cursor: pointer;
  font-size: 0.85rem;
  color: var(--text-dim);
  transition: all 150ms ease;
}

.advancedToggle:hover {
  border-color: var(--border-strong);
  color: var(--text);
}

.advancedArrow {
  font-size: 0.7rem;
}

.advancedContent {
  margin-top: 12px;
  padding: 16px;
  border-radius: 12px;
  background: var(--bg-panel);
  border: 1px solid var(--border);
}

.optionDesc {
  font-size: 0.7rem;
  color: var(--text-dim);
  margin-top: 2px;
}

.startCta {
  width: 100%;
  padding: 14px 24px;
  font-size: 1rem;
  font-weight: 700;
  border-radius: 12px;
  border: none;
  background: var(--accent);
  color: white;
  cursor: pointer;
  transition: transform 150ms ease, box-shadow 150ms ease;
  box-shadow: 0 4px 12px rgba(100, 108, 255, 0.3);
}

.startCta:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(100, 108, 255, 0.4);
}

/* Theme toggle - discrete in corner */
.themeToggle {
  position: fixed;
  bottom: 16px;
  right: 16px;
  width: 44px;
  height: 44px;
  padding: 0;
  border-radius: 50%;
  background: var(--bg-button);
  border: 2px solid var(--border-strong);
  font-size: 1.3rem;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 1;
  box-shadow: 0 2px 8px var(--shadow);
  transition: transform 200ms ease, box-shadow 200ms ease;
  z-index: 40;
}

.themeToggle:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 12px var(--shadow);
}

/* Desktop: move stats to the right side */
@media (min-width: 900px) {
  .statsBar {
    position: fixed;
    right: 24px;
    top: 50%;
    transform: translateY(-50%);
    flex-direction: column;
    gap: 12px;
    margin-bottom: 0;
    padding: 16px;
    background: var(--bg-panel);
    border-radius: 12px;
    border: 1px solid var(--border);
  }
}

.bigGrid {
  position: relative;
  width: min(92vw, calc(100vh - 140px), 720px);
  aspect-ratio: 1 / 1;
  background: var(--bg-panel);
  border-radius: 16px;
  padding: 16px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  outline: 2px solid var(--line-strong);
}

/* Thick "big board" lines drawn OVER the grid */
.bigGrid::after {
  content: "";
  position: absolute;
  inset: 16px; /* match padding */
  border-radius: 4px;
  pointer-events: none;

  /* 2 vertical + 2 horizontal lines at 1/3 and 2/3 */
  background:
    linear-gradient(
      to right,
      transparent 33.333%,
      var(--line-strong) 33.333%,
      var(--line-strong) calc(33.333% + 3px),
      transparent calc(33.333% + 3px)
    ),
    linear-gradient(
      to right,
      transparent 66.666%,
      var(--line-strong) 66.666%,
      var(--line-strong) calc(66.666% + 3px),
      transparent calc(66.666% + 3px)
    ),
    linear-gradient(
      to bottom,
      transparent 33.333%,
      var(--line-strong) 33.333%,
      var(--line-strong) calc(33.333% + 3px),
      transparent calc(33.333% + 3px)
    ),
    linear-gradient(
      to bottom,
      transparent 66.666%,
      var(--line-strong) 66.666%,
      var(--line-strong) calc(66.666% + 3px),
      transparent calc(66.666% + 3px)
    );
  opacity: 0.9;
}

.boardLabel {
  position: absolute;
  top: 8px;
  left: 10px;
  font-size: 12px;
  font-weight: 700;
  color: var(--text-dim);
  user-select: none;
}

.smallBoard {
  position: relative;
  border-radius: 14px;
  padding: 10px;
  box-shadow: inset 0 0 0 1px var(--border);
  background: var(--bg-panel);
  transition: transform 120ms ease, opacity 120ms ease, box-shadow 120ms ease;
}

.smallBoard.playable {
  box-shadow: inset 0 0 0 2px var(--line-strong), 0 10px 24px var(--shadow);
  transform: translateY(-1px);
}

.smallBoard.dim {
  opacity: 0.30;
  filter: saturate(0.6);
}

.smallGrid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 4px;
}

.cell {
  width: 100%;
  aspect-ratio: 1 / 1;
  min-width: 0;
  min-height: 0;
  padding: 0;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--bg-panel);
  color: var(--text);
  font-size: clamp(18px, 3.2vw, 30px);
  font-weight: 800;
  line-height: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  transition: transform 90ms ease, background 120ms ease, border-color 120ms ease;
}

.cellX {
  color: var(--x-color);
}

.cellO {
  color: var(--o-color);
}

/* AI move highlight animation */
@keyframes cellPop {
  0% {
    transform: scale(0.5);
    opacity: 0;
  }
  50% {
    transform: scale(1.15);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.cellHighlight {
  animation: cellPop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  box-shadow: 0 0 16px 4px rgba(239, 68, 68, 0.5);
  z-index: 25;
  position: relative;
}

/* Overlay for decided boards */
.overlay {
  position: absolute;
  inset: 0;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--overlay-bg);
  pointer-events: none;
}

.overlayMark {
  font-size: clamp(48px, 12vw, 100px);
  font-weight: 900;
  text-shadow: 0 4px 20px var(--shadow);
}

.overlayX .overlayMark {
  color: var(--x-color);
}

.overlayO .overlayMark {
  color: var(--o-color);
}

.overlayD .overlayMark {
  color: var(--text-dim);
}

/* Winning line */
.winLine {
  position: absolute;
  background: currentColor;
  border-radius: 4px;
  opacity: 0.9;
}

.overlayX .winLine {
  color: var(--x-color);
}

.overlayO .winLine {
  color: var(--o-color);
}

/* Line positions: 0-2 = rows, 3-5 = cols, 6-7 = diagonals */
/* Account for 10px padding: grid spans from 10px to calc(100% - 10px) */

/* Rows (horizontal lines) */
.winLine0 { top: calc(10px + (100% - 20px) / 6); left: 10px; right: 10px; height: 4px; transform: translateY(-50%); }
.winLine1 { top: 50%; left: 10px; right: 10px; height: 4px; transform: translateY(-50%); }
.winLine2 { top: calc(100% - 10px - (100% - 20px) / 6); left: 10px; right: 10px; height: 4px; transform: translateY(-50%); }

/* Columns (vertical lines) */
.winLine3 { left: calc(10px + (100% - 20px) / 6); top: 10px; bottom: 10px; width: 4px; transform: translateX(-50%); }
.winLine4 { left: 50%; top: 10px; bottom: 10px; width: 4px; transform: translateX(-50%); }
.winLine5 { left: calc(100% - 10px - (100% - 20px) / 6); top: 10px; bottom: 10px; width: 4px; transform: translateX(-50%); }

/* Diagonals */
.winLine6 {
  top: 50%;
  left: 50%;
  width: calc(120% - 20px);
  height: 4px;
  transform: translate(-50%, -50%) rotate(45deg);
}

.winLine7 {
  top: 50%;
  left: 50%;
  width: calc(120% - 20px);
  height: 4px;
  transform: translate(-50%, -50%) rotate(-45deg);
}

/* Victory overlay */
.victoryOverlay {
  position: fixed;
  inset: 0;
  background: var(--overlay-dark);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 24px;
  z-index: 100;
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.victoryText {
  font-size: clamp(48px, 15vw, 120px);
  font-weight: 900;
  text-shadow: 0 4px 30px var(--shadow);
  animation: victoryPop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes victoryPop {
  0% { transform: scale(0.3); opacity: 0; }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); opacity: 1; }
}

.victoryX {
  color: var(--x-color);
  text-shadow: 0 0 60px var(--x-color), 0 4px 30px var(--shadow);
}

.victoryO {
  color: var(--o-color);
  text-shadow: 0 0 60px var(--o-color), 0 4px 30px var(--shadow);
}

.victoryMatchScore {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 8px;
  animation: fadeIn 0.4s ease 0.15s both;
}

.victoryExplain {
  font-size: 1rem;
  opacity: 0.8;
  max-width: 300px;
  text-align: center;
  line-height: 1.4;
  animation: fadeIn 0.5s ease 0.2s both;
}

.victoryButtons {
  display: flex;
  gap: 12px;
  animation: fadeIn 0.5s ease 0.3s both;
}

.victoryBtn {
  font-size: 1rem;
  padding: 10px 24px;
}

.victoryBtnPrimary {
  background: rgba(59, 130, 246, 0.3);
  border-color: #3b82f6;
}

/* Confetti */
.confetti {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.confettiPiece {
  position: absolute;
  top: -20px;
  width: 10px;
  height: 10px;
  border-radius: 2px;
  animation: confettiFall linear forwards;
}

@keyframes confettiFall {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

/* Add some variety to confetti shapes */
.confettiPiece:nth-child(odd) {
  width: 8px;
  height: 14px;
}

.confettiPiece:nth-child(3n) {
  width: 6px;
  height: 6px;
  border-radius: 50%;
}

.confettiPiece:nth-child(4n) {
  width: 12px;
  height: 5px;
}

/* Replay controls */
.replayControls {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  background: var(--bg);
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: 0 8px 32px var(--shadow);
  z-index: 50;
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

.replayControls .btn {
  padding: 8px 12px;
  min-width: 40px;
  font-size: 1rem;
}

.replayStatus {
  padding: 0 12px;
  font-size: 0.9rem;
  opacity: 0.7;
  min-width: 60px;
  text-align: center;
}

.replayAuto {
  font-size: 0.85rem;
}

.replayAuto.btnActive {
  background: rgba(34, 197, 94, 0.3);
  border-color: rgba(34, 197, 94, 0.6);
}

.replayExit {
  margin-left: 8px;
  background: rgba(239, 68, 68, 0.2);
  border-color: rgba(239, 68, 68, 0.5);
}

/* Continue bar (shown when viewing board after game ends in match) */
.continueBar {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px;
  background: var(--bg);
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: 0 8px 32px var(--shadow);
  z-index: 50;
  animation: slideUp 0.3s ease;
}

.continueBtnPrimary {
  background: rgba(59, 130, 246, 0.3);
  border-color: #3b82f6;
}

/* Doubling Cube */
.cubeArea {
  position: fixed;
  left: 32px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  transition: top 0.4s ease, bottom 0.4s ease, transform 0.4s ease;
}

/* Center position - cube not yet used */
.cubeArea.cubeCenter {
  top: 50%;
  transform: translateY(-50%);
}

/* Player position - bottom */
.cubeArea.cubePlayer {
  top: auto;
  bottom: 100px;
  transform: none;
}

/* Opponent position - top */
.cubeArea.cubeOpponent {
  top: 100px;
  transform: none;
}

@media (max-width: 900px) {
  .cubeArea {
    position: static;
    transform: none !important;
    flex-direction: row;
    margin-top: 16px;
  }
}

.cube {
  width: 56px;
  height: 56px;
  background: var(--bg-button);
  border-radius: 10px;
  border: 2px solid var(--border-strong);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px var(--shadow);
  transition: border-color 200ms ease, box-shadow 200ms ease;
}

.cubeCentered {
  border-color: var(--border-strong);
}

.cubeX {
  border-color: var(--x-color);
  box-shadow: 0 4px 12px var(--x-color);
}

.cubeO {
  border-color: var(--o-color);
  box-shadow: 0 4px 12px var(--o-color);
}

.cubeValue {
  font-size: 24px;
  font-weight: 900;
  color: var(--text);
  line-height: 1;
}

.cubeOwner {
  font-size: 10px;
  font-weight: 700;
  opacity: 0.7;
  margin-top: 2px;
}

.cubeX .cubeOwner {
  color: var(--x-color);
}

.cubeO .cubeOwner {
  color: var(--o-color);
}

.cubeBtn {
  background: rgba(234, 179, 8, 0.2);
  border-color: rgba(234, 179, 8, 0.6);
  color: #eab308;
  font-weight: 600;
}

.cubeBtn:hover {
  background: rgba(234, 179, 8, 0.3);
}

/* Double offer overlay */
.doubleOverlay {
  position: fixed;
  inset: 0;
  background: var(--overlay-dark);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 90;
  animation: fadeIn 0.3s ease;
}

.doubleDialog {
  background: var(--bg);
  border-radius: 16px;
  border: 1px solid var(--border);
  padding: 32px 40px;
  text-align: center;
  box-shadow: 0 20px 60px var(--shadow);
  animation: victoryPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.doubleTitle {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 24px;
}

.doubleTitleX {
  color: var(--x-color);
}

.doubleTitleO {
  color: var(--o-color);
}

.doubleButtons {
  display: flex;
  gap: 12px;
  justify-content: center;
}

.doubleBtn {
  padding: 12px 24px;
  font-size: 1rem;
  font-weight: 600;
}

.doubleBtnAccept {
  background: rgba(34, 197, 94, 0.3);
  border-color: rgba(34, 197, 94, 0.6);
  color: #22c55e;
}

.doubleBtnAccept:hover {
  background: rgba(34, 197, 94, 0.4);
}

.doubleBtnDecline {
  background: rgba(239, 68, 68, 0.2);
  border-color: rgba(239, 68, 68, 0.5);
  color: #ef4444;
}

.doubleBtnDecline:hover {
  background: rgba(239, 68, 68, 0.3);
}

/* AI Commentary */
.commentary {
  position: fixed;
  right: 24px;
  top: 120px;
  background: var(--o-color);
  color: white;
  padding: 12px 18px;
  border-radius: 16px;
  font-size: 0.95rem;
  font-weight: 500;
  max-width: 200px;
  cursor: pointer;
  animation: commentarySlide 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.4);
  z-index: 50;
}

.commentary::before {
  content: "";
  position: absolute;
  left: -8px;
  top: 50%;
  transform: translateY(-50%);
  border-top: 8px solid transparent;
  border-bottom: 8px solid transparent;
  border-right: 8px solid var(--o-color);
}

@keyframes commentarySlide {
  0% {
    opacity: 0;
    transform: translateX(20px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

.commentaryText {
  display: inline-block;
}

/* Mobile: show commentary at top */
@media (max-width: 900px) {
  .commentary {
    position: static;
    max-width: none;
    margin-bottom: 12px;
  }

  .commentary::before {
    display: none;
  }
}
